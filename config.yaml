# Bot Configuration - Phase 1: Verification Mode
# Default: OBSERVE (no trading). Set MODE=TRADE to enable orders.

mode: TRADE  # OBSERVE | TRADE

# Run mode: hourly (default), fifteen_min, or both
run_mode: both  # hourly | fifteen_min | both (use both for Hourly OBSERVE + 15min TRADE)

# Assets to trade (btc, eth, sol, xrp)
assets:
  - btc
  - eth

# Per-interval enable and mode (when run_mode=both)
intervals:
  hourly:
    enabled: true
    assets: [btc, eth]
    mode: TRADE  # OBSERVE | TRADE (overrides top-level mode)
  fifteen_min:
    enabled: true
    assets: [btc, eth] # sol, xpr is very high volatility and not supported for 15-min trading
    mode: TRADE     # OBSERVE | TRADE (overrides top-level mode)

# Strike window around spot price ($). Per-asset override optional.
spot_window: 1500
spot_window_by_asset:
  eth: 150
  sol: 50
  xrp: 1

# Thresholds (inclusive, cents 0-100) - same for all assets
thresholds:
  normal:
    yes_min: 93
    yes_max: 98
    no_min: 93
    no_max: 98
  late:
    yes_min: 94
    yes_max: 99
    no_min: 94
    no_max: 99

# Schedule
schedule:
  interval_minutes: 3
  start_offset_minutes: 1   # Wait H+1 min after hour start (America/Los_Angeles)
  # Hourly: trade only in last 10 min; variable run frequency
  late_window_minutes: 10       # Trade only when minutes_to_close <= 10
  late_interval_minutes: 1      # Run every 1 min when 10 > minutes_to_close > 5
  late_interval_seconds_under_5: 30  # Run every 30 sec when minutes_to_close <= 5

# Caps (per ticker, per side when cap_scope=per_side)
caps:
  max_orders_per_ticker: 2       # Per side per ticker when cap_scope=per_side
  max_total_orders_per_hour: 30
  cap_scope: per_side            # per_side = cap YES and NO separately per ticker
  # 15-min specific (optional overrides)
  fifteen_min:
    max_orders_per_ticker: 6
    max_total_orders_per_15min: 20

# 15-min strategy: hourly_style (94-99c either side) or lopsided_2min
fifteen_min:
  strategy: hourly_style         # hourly_style | lopsided_2min
  late_window_seconds: 140       # Only trade when seconds_to_close <= 140 (default ~2.3 min)
  late_window_interval_seconds: 3  # When in 2-min window, run every 15 sec
  stop_loss_pct: 0.40             # Exit if PnL <= -30% (evaluated every run)
  # hourly_style: same as hourly - buy side in 94-99c (pick cheaper if both)
  yes_min: 94
  yes_max: 99
  no_min: 94
  no_max: 99


# Order size (per-interval overrides)
order:
  contracts: 1
  max_cost_cents: 500           # Fallback when per-interval not set
  hourly:
    contracts: 1
    max_cost_cents: 100
  fifteen_min:
    contracts: 1
    max_cost_cents: 100

# Exit criteria (same as Farthest Band Strategy - evaluated every run)
exit_criteria:
  stop_loss_pct: 0.20           # Exit if PnL <= -20%
  profit_target_pct: null       # Optional: exit if PnL >= X% (e.g. 0.05 = 5%); null = disabled

# Persistence
state:
  db_path: data/bot_state.db

# Logging
logging:
  file: logs/bot.log
  level: INFO
